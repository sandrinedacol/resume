<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <style></style>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const data = {}

            function formatDate(dateStr) {
                if (!dateStr) return '';
                const date = new Date(dateStr);
                const month = date.toLocaleDateString('en-US', { month: 'short' });
                const year = date.getFullYear();
                return `${month} ${year}`;
            }

            // Header
            document.getElementById('name').textContent = data.basics.name;
            document.getElementById('label').textContent = data.basics.label;
            document.getElementById('summary').textContent = data.basics.summary;
            const contactInfo = `
              <ul class="icon-list">
                <li>
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather feather-mail"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
                ${data.basics.email}
                </li><li>
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather feather-phone"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg>
                ${data.basics.phone}
                </li><li>
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather feather-map-pin"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>
                ${data.basics.location.city}, ${data.basics.location.country}
                </li>
              </ul>
            `;
            document.getElementById('contact-info').innerHTML = contactInfo;


            // Work Experience
            const workHtml = data.work.map(job => {
                const projectsKey = job.projects || [];
                const projectsHtml = projectsKey.map(proj => `
                    <div class="project-box">
                        <h4>${proj.name}</h4>
                        ${proj.description ? `<div class="project-description">${proj.description}</div>` : ''}
                        ${proj.highlights ? `
                            <ul class="highlights">
                                ${proj.highlights.map(h => `<li>${h}</li>`).join('')}
                            </ul>
                        ` : ''}
                        ${proj.links ? `
                            <div class="links">
                                ${proj.links.map(l => `<a href="${l.url}" target="_blank">${l.type}</a>`).join('')}
                            </div>
                        ` : ''}
                    </div>
                `).join('');

                return `
                    <div class="timeline-item">
                        <h3>${job.position}</h3>
                        <div class="company">${job.company}${job.department ? ` 路 ${job.department}` : ''}</div>
                        ${job.location ? `<div class="location">${job.location}</div>` : ''}
                        <div class="period">
                          ${formatDate(job.start_date)} - ${formatDate(job.end_date)}  路 
                          <time-duration dates="${job.start_date}|${job.end_date}"></time-duration>
                          ${job.contract ? `${job.contract}` : ''}
                        </div>
                        ${projectsHtml}
                    </div>
                `;
            }).join('');
            document.getElementById('work-experience').innerHTML = workHtml;

            // Education
            const educationHtml = data.education.map(edu => {
                return `
                    <div class="timeline-item">
                        <h3>
                          ${edu.study_type}
                          ${edu.program_name ? `<i>"${edu.program_name}"</i>` : ''}
                        </h3>
                        <div class="institution">${edu.institution}</div>
                        <div class="period">${formatDate(edu.start_date)} - ${formatDate(edu.end_date)}</div>
                        ${edu.description ? `<p style="margin-top: 10px;">${edu.description}</p>` : ''}
                        ${edu.courses ? `
                            <ul class="highlights">
                                ${edu.courses.map(c => `<li>${c}</li>`).join('')}
                            </ul>
                        ` : ''}
                        ${edu.projects ? edu.projects.map(proj => `
                            <div class="project-box" style="margin-top: 15px;">
                                <h4>${proj.name}</h4>
                                ${proj.highlights ? `
                                    <ul class="highlights">
                                        ${proj.highlights.map(h => `<li>${h}</li>`).join('')}
                                    </ul>
                                ` : ''}
                            </div>
                        `).join('') : ''}
                    </div>
                `;
            }).join('');
            document.getElementById('education').innerHTML = educationHtml;

            // Personal Projects
            if (data.personal_projects) {
                const projectsHtml = data.personal_projects.map(proj => `
                    <div class="timeline-item">
                        <h3>${proj.title}</h3>
                        <div class="period">${formatDate(proj.startDate)} - ${formatDate(proj.endDate)}</div>
                        <div class="project-box">
                        <h4>${proj.name}</h4>
                        ${proj.type ? `<div class="project-description">${proj.type}</div>` : ''}
                        ${proj.highlights ? `
                            <ul class="highlights">
                                ${proj.highlights.map(h => `<li>${h}</li>`).join('')}
                            </ul>
                        ` : ''}
                        ${proj.links ? `
                            <div class="links">
                                ${proj.links.map(l => `<a href="${l.url}" target="_blank">${l.type}</a>`).join('')}
                            </div>
                        ` : ''}
                    </div>
                    </div>
                `).join('');
                document.getElementById('personal-projects').innerHTML = projectsHtml;
            }

            // Inactivity
            if ("inactivity" in data) {
                const inactivityHtml = data.inactivity.map(job => {
                return `
                    <div class="timeline-item">
                        <h3>${job.position}</h3>
                        <div class="company">${job.company}</div>
                        ${job.location ? `<div class="location">${job.location}</div>` : ''}
                        <div class="period">
                          ${formatDate(job.start_date)} - ${formatDate(job.end_date)}  路 
                          <time-duration dates="${job.start_date}|${job.end_date}"></time-duration>
                        </div>
                    </div>
                `;
                }).join('');
                document.getElementById('inactivity').innerHTML = `
                    <h2>Inactivity</h2>
                    <div>${inactivityHtml}</div>
                `;
            }

            // Skills
            const skillsHtml = data.skills.map(domain => {
                return `
                    <div class=skill-domain-item>
                        <h3>
                          ${domain.domain}
                        </h3>
                        
                        ${domain.sub_domains ? domain.sub_domains.map(sub_domain => `
                            <div class=skill-subdomain>
                              <h4>${sub_domain.name}</h4>
                              ${sub_domain.skills ? `
                            <ul class="skill-item">
                                ${sub_domain.skills.map(skill => `
                                    <li>
                                      ${skill.name}
                                      ${skill.level ? `<a class="note">  路 ${skill.level}</a` : ''}
                                      ${skill.technos ? `
                                        <ul class="tag-list">
                                            ${skill.technos.map(techno => `
                                            <li>${techno}</li>
                                            `).join('')}
                                        </ul>
                                    ` : ''}
                                    </li>
                                  `).join('')}
                            </ul>
                        ` : ''}
                            </div>
                        `).join('') : ''}
                    </div>
                `;
            }).join('');
            document.getElementById('sidebar-skills').innerHTML = skillsHtml;

            // Interests
            if ("interests" in data) {
                const interestsHtml = data.interests.map(interest => {
                return `
                <div class=interest-item>
                    <h3>${interest.name}</h3>
                    ${interest.description ? `
                    <p class=interest-description>${interest.description}</p>
                    ` : ''}
                    ${interest.keywords ? `
                    <ul class="tag-list">
                        ${interest.keywords.map(keyword => `
                        <li>${keyword}</li>
                        `).join('')}
                    </ul>
                    ` : ''}
                </div>
                `;
                }).join('');

                document.getElementById('sidebar-interests').innerHTML = `
                    <h2>Interests</h2>
                    <div>${interestsHtml}</div>
                `;
            }
            

        });
    </script>
    <script type="module">
          const pluralize = (num, str) => `${num} ${num === 1 ? str : str.concat('s')}`

class TimeDuration extends HTMLElement {
  connectedCallback() {
    const dates = this.getAttribute('dates')
    if (!dates) return this.remove()

    const duration = dates.split('|').reduce((acc, _date, i, dates) => {
      if (i % 2) return acc
      const [startDate, endDate] = dates.slice(i)
      return acc + (startDate ? +new Date(endDate || Date.now()) - +new Date(startDate) : 0)
    }, 0)

    const diffDate = new Date(duration)
    const years = diffDate.getFullYear() - 1970
    const months = diffDate.getMonth()
    const days = diffDate.getDate() - 1

    const segments = [
      years && pluralize(years, 'year'),
      months && pluralize(months, 'month'),
      days && !years && !months && pluralize(days, 'day'),
    ].filter(Boolean)
    if (!segments.length) return

    this.textContent = segments.join(' ')
  }
}

customElements.define('time-duration', TimeDuration)

    </script>
</head>
<body>
    <div class="container">
        <header>
            <h1 id="name"></h1>
            <div class="label" id="label"></div>
            <div class="summary" id="summary"></div>
            <div class="contact-info" id="contact-info"></div>
        </header>
        
        <div class="main-content">

            <aside class="sidebar">
              <section>
                <h2>Skills</h2>
                <div id="sidebar-skills"></div>
              </section>

              <section id="sidebar-interests"></section>
            </aside>
            
            <div class="content">
                <section>
                    <h2>Work Experience</h2>
                    <div id="work-experience"></div>
                </section>
                
                <section>
                    <h2>Education</h2>
                    <div id="education"></div>
                </section>
                
                <section>
                    <h2>Personal Project</h2>
                    <div id="personal-projects"></div>
                </section>

                <section id="inactivity"></section>
            </div>
            
        </div>
    </div>
</body>
</html>